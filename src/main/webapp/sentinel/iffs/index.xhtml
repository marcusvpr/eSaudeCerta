<ui:composition template="/WEB-INF/template/MpLayoutPadraoAnonymusIff.xhtml"
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:h="http://xmlns.jcp.org/jsf/html"
    xmlns:f="http://xmlns.jcp.org/jsf/core"
    xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
    xmlns:p="http://primefaces.org/ui">

	<ui:define name="titulo">IFF Aplicação</ui:define>

	<ui:define name="corpo">
	
    	<div id="loginIff-dialog">
    	
			<h:form id="frmPesquisa">

    			<!--  p:messages id="messages" autoUpdate="true" closable="true" -->
				<p:growl id="messages" showDetail="true" sticky="true" 
													autoUpdate="true" life="300" />

				<p:panel header="Aplicação" style="margin-top:80px;">
					<p:tabView id="tabViewIff">

						<p:tab title="Consulta">
							<div class="ContainerIndent">
								<div class="Container100">
									<span class="DispInlBlock Fleft FloatNoneOnMobile">  
										<p:commandButton value="Pesquisar" update="@form"
												action="#{mpPesquisaUsuarioIffsBean.pesquisar}" />
									</span>
								</div>
							</div>

							<div class="ContainerIndent">
								<div class="Container100">
									<p:panel header="Filtra" toggleable="true" toggleSpeed="500"
										closeSpeed="500" collapsed="false">
										
										<p:panelGrid columns="5" layout="grid"
											style="border:0px none;background:none" styleClass="ui-fluid">

											<h:panelGroup id="pgNome">
												<p:outputLabel value="Nome: "
													rendered="#{mpLoginBean.scIndLabelCampo}" />
												<p:inputText placeholder="Nome"
													value="#{mpPesquisaUsuarioIffsBean.mpFiltro.nome}" />
											</h:panelGroup>
											<h:panelGroup id="pgEmail">
												<p:outputLabel value="Email: "
													rendered="#{mpLoginBean.scIndLabelCampo}" />
												<p:inputText placeholder="Email"
													value="#{mpPesquisaUsuarioIffsBean.mpFiltro.email}" />
											</h:panelGroup>
											<h:panelGroup id="pgSetor">
												<p:outputLabel value="Setor: "
													rendered="#{mpLoginBean.scIndLabelCampo}" />
												<p:selectCheckboxMenu filter="true"
													filterMatchMode="startsWith" panelStyle="width:250px"
													label="Setores"
													value="#{mpPesquisaUsuarioIffsBean.mpFiltro.mpSetorIffs}">
													<f:selectItems
														value="#{mpPesquisaUsuarioIffsBean.mpSetorIffs}"
														var="mpSetorIff" itemValue="#{mpSetorIff}"
														itemLabel="#{mpSetorIff.descricao}" />
												</p:selectCheckboxMenu>
											</h:panelGroup>
											<h:panelGroup id="pgRamal">
												<p:outputLabel value="Ramal: "
													rendered="#{mpLoginBean.scIndLabelCampo}" />
												<p:inputText placeholder="Ramal"
													value="#{mpPesquisaUsuarioIffsBean.mpFiltro.ramal}" />
											</h:panelGroup>
											<p:outputLabel />

										</p:panelGrid>
									</p:panel>
								</div>
							</div>

							<div class="ContainerIndent">
								<div class="Container100">
								
									<p:dataTable id="mpUsuarioIffsTable"
										value="#{mpPesquisaUsuarioIffsBean.mpUsuarioIffsFiltrados}"
										var="mpUsuarioIff" selectionMode="single"
										selection="#{mpPesquisaUsuarioIffsBean.mpUsuarioIffSelecionado}"
										rowKey="#{mpUsuarioIff.nome}" reflow="true" style="margin-top:20px"
										emptyMessage="Nenhum Usuário Iff encontrado." rows="10"
										paginator="true" paginatorAlwaysVisible="false"
										paginatorPosition="both">

										<p:column headerText="Nome" style="text-align:center;"
											sortBy="#{mpUsuarioIff.nome}">
											<h:outputText value="#{mpUsuarioIff.nome}" />
										</p:column>
										<p:column headerText="Email" style="text-align:center;"
											sortBy="#{mpUsuarioIff.email}">
											<h:outputText value="#{mpUsuarioIff.email}" />
										</p:column>
										<p:column headerText="Setor" style="text-align:center;"
											sortBy="#{mpUsuarioIff.mpSetorIff.descricaoRamal}">
											<h:outputText value="#{mpUsuarioIff.mpSetorIff.descricaoRamal}" />
										</p:column>
										<p:column headerText="Ramal" style="text-align:center;"
											sortBy="#{mpUsuarioIff.ramal}">
											<h:outputText value="#{mpUsuarioIff.ramal}" />
										</p:column>
										<p:column headerText="Status" style="text-align:center;"
											sortBy="#{mpUsuarioIff.indAtivo}">
											<h:outputText
												value="#{mpUsuarioIff.indAtivo ? 'Ativo' : 'Inativo'}" />
										</p:column>

									</p:dataTable>
								</div>
							</div>
						</p:tab>

						<p:tab title="Login">
							<p:panelGrid columns="2" layout="grid" style="margin-top: 20px"
								styleClass="panelgrid-noborder"
								columnClasses="ui-grid-col-3, ui-grid-col-9">

								<p:separator style="width:1px; height:1px" />
								<p:separator style="width:1px; height:1px" />

								<p:outputLabel value="Login/Email" for="j_username"
									style="color:#808080; font-weight:bold; font-size:12px;" />
								<p:inputText id="j_username" value="#{mpLoginBean.loginEmail}">
								</p:inputText>

								<p:outputLabel value="Senha" for="j_password"
									style="color:#808080; font-weight:bold; font-size:12px;" />
								<p:password id="j_password" />

								<p:separator style="width:1px; height:1px" />
								<p:commandButton value="Login" ajax="false" icon="ui-icon-key"
									style="font-size:16px; font-weight:bold;width:100px;height:100px"
									action="#{mpLoginBean.login}" />

							</p:panelGrid>
						</p:tab>

					</p:tabView>
				</p:panel>    			

    		</h:form>		
    	</div>
    	<div align="center">
			<p:separator style="width:1px; height:1px" />
			<p:separator style="width:1px; height:1px" />
			<p:separator style="width:40%; height:3px" />
			<p:outputLabel value="#{mpLoginBean.mensagemSistema}"
    								style="font-size:14px; color:black; font-weight:bold;" />
			<p:separator style="width:40%; height:3px" />

			<p:separator style="width:1px; height:1px" />
			<p:separator style="width:1px; height:1px" />
			<p:separator style="width:1px; height:1px" />
    	</div>
	</ui:define>
</ui:composition>